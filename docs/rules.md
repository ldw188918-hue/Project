# 프로젝트 개발 규칙 (Project Rules)

> **Note**: 시스템 제약으로 인해 `.agent/rules/` 대신 `docs/rules.md`에 저장되었습니다.

## 1. 기본 원칙
*   **언어**: 모든 문서, 주석, 커밋 메시지, 대화는 **한국어**를 사용한다.
*   **승인 절차**: 클라이언트(사용자)의 허락을 구하는 절차는 최소화하고, 가능한 경우 즉시 실행(Auto-run)하여 막힘없이 진행한다.

## 2. 코어 로직 개발 가이드라인
UI를 제외한 모든 핵심 비즈니스 로직(데이터 처리, 시뮬레이션 계산 등)은 다음 원칙을 엄격히 준수한다.

### 2.1 TDD (Test-Driven Development) Cycle
1.  **Red**: 실패하는 테스트 코드를 먼저 작성한다. (인터페이스 및 기대 동작 정의)
2.  **Green**: 테스트를 통과하기 위한 최소한의 로직을 구현한다.
3.  **Refactor**: 중복을 제거하고 구조를 개선한다 (SOLID 적용).

### 2.2 SOLID 원칙 적용 가이드
*   **SRP (단일 책임 원칙)**:
    *   `DataLoader`: 데이터 로딩만 담당.
    *   `SimulationEngine`: 계산 로직만 담당.
    *   `RiskAnalyzer`: 리스크 평가 로직만 담당.
*   **OCP (개방-폐쇄 원칙)**:
    *   새로운 시나리오(예: 환율 변동) 추가 시 `SimulationStrategy` 인터페이스를 구현하는 새 클래스를 만들고, 기존 계산 엔진 코드는 수정하지 않도록 설계한다.
*   **LSP (리스코프 치환 원칙)**:
    *   상속 관계에서 자식 클래스는 부모 클래스의 규약을 깨지 않아야 한다. (추상 클래스 적극 활용)
*   **ISP (인터페이스 분리 원칙)**:
    *   거대한 하나의 인터페이스 대신, `ICostCalculator`, `IProductionForecaster` 등 기능별로 분리한다.
*   **DIP (의존성 역전 원칙)**:
    *   상위 모듈(대시보드)이 하위 모듈(구체적인 시뮬레이션 로직)에 직접 의존하지 않고, 추상화된 인터페이스에 의존하도록 한다.

### 2.3 테스트 규칙 (Test Rules)
*   **Core Logic**: 비즈니스 로직(도메인 레이어)은 반드시 **TDD**로 개발하며 테스트 커버리지를 확보한다.
*   **UI (Streamlit)**: UI 코드는 자동화 테스트 대상에서 제외한다. 수동 검증으로 대체한다.

## 3. DevOps 규칙
*   **CI (Build)**: GitHub Actions를 통해 `pytest`를 자동 실행한다.
*   **CD (Deploy)**:
    *   목표: **GitHub Pages**
    *   기술적 해법: **Stlite (WASM)**을 사용하여 Streamlit 앱을 정적 HTML로 변환 후 배포한다.
