name: Deploy to GitHub Pages

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

permissions:
  contents: write

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: "3.10"

    - name: Install Dependencies
      run: |
        pip install streamlit pandas numpy plotly
        
    - name: Create landing page
      run: |
        mkdir -p build
        cat > build/index.html << 'HTMLEOF'
        <!DOCTYPE html>
        <html lang="ko">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Digital Twin ê³µê¸‰ë§ ë¦¬ìŠ¤í¬ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</title>
            <style>
                * { margin: 0; padding: 0; box-sizing: border-box; }
                body {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    min-height: 100vh;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 20px;
                }
                .container {
                    background: white;
                    border-radius: 20px;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                    max-width: 800px;
                    padding: 60px 40px;
                    text-align: center;
                }
                h1 { font-size: 2.5em; color: #2d3748; margin-bottom: 20px; }
                .emoji { font-size: 1.2em; }
                p { color: #4a5568; font-size: 1.1em; line-height: 1.6; margin: 20px 0; }
                .cta-button {
                    display: inline-block;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 18px 40px;
                    border-radius: 50px;
                    text-decoration: none;
                    font-size: 1.2em;
                    font-weight: bold;
                    margin: 30px 10px;
                    transition: transform 0.3s, box-shadow 0.3s;
                    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
                }
                .cta-button:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
                }
                .secondary-button {
                    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                    box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
                }
                .secondary-button:hover { box-shadow: 0 6px 20px rgba(240, 147, 251, 0.6); }
                .features {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin: 40px 0;
                }
                .feature {
                    background: #f7fafc;
                    padding: 25px;
                    border-radius: 10px;
                    border: 2px solid #e2e8f0;
                }
                .feature h3 { color: #2d3748; margin-bottom: 10px; }
                .feature p { font-size: 0.95em; margin: 0; }
                .code {
                    background: #2d3748;
                    color: #68d391;
                    padding: 15px;
                    border-radius: 8px;
                    font-family: 'Courier New', monospace;
                    text-align: left;
                    margin: 20px 0;
                    overflow-x: auto;
                }
                .tech-stack {
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: center;
                    gap: 10px;
                    margin: 30px 0;
                }
                .tech-badge {
                    background: #edf2f7;
                    color: #4a5568;
                    padding: 8px 16px;
                    border-radius: 20px;
                    font-size: 0.9em;
                    font-weight: 600;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h1><span class="emoji">ğŸ­</span> Digital Twin ê³µê¸‰ë§ ë¦¬ìŠ¤í¬ ë¶„ì„</h1>
                <p><strong>ì œì¡° ë¶„ì•¼ ì˜ì‚¬ê²°ì • ì§€ì› ì‹œìŠ¤í…œ (DSS)</strong></p>
                <p>ë°ì´í„°ë¥¼ ë„˜ì–´, ì˜ì‚¬ê²°ì •ì˜ í™•ì‹ ìœ¼ë¡œ. SOLID ì•„í‚¤í…ì²˜ ê¸°ë°˜ ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì‹œë®¬ë ˆì´ì…˜ ì—”ì§„</p>
                
                <div class="features">
                    <div class="feature">
                        <h3>âš¡ What-If ì‹œë®¬ë ˆì´ì…˜</h3>
                        <p>ì›ìì¬ ê°€ê²© ë³€ë™ê³¼ ê³µê¸‰ ì§€ì—°ì´ ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„</p>
                    </div>
                    <div class="feature">
                        <h3>ğŸ¯ SOLID ì•„í‚¤í…ì²˜</h3>
                        <p>í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ í´ë¦° ì½”ë“œ ì„¤ê³„</p>
                    </div>
                    <div class="feature">
                        <h3>âœ… TDD ë°©ì‹</h3>
                        <p>100% í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¡œ ê²€ì¦ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</p>
                    </div>
                </div>

                <a href="https://share.streamlit.io/YOUR_USERNAME/Project/main/src/presentation/dashboard.py" class="cta-button">
                    <span class="emoji">ğŸš€</span> ëŒ€ì‹œë³´ë“œ ì‹¤í–‰í•˜ê¸°
                </a>
                <a href="https://github.com/ldw188918-hue/Project" class="cta-button secondary-button">
                    <span class="emoji">ğŸ’»</span> GitHub ì†ŒìŠ¤ì½”ë“œ
                </a>

                <h2 style="margin-top: 50px; color: #2d3748;">ğŸ› ï¸ ë¡œì»¬ ì‹¤í–‰ ë°©ë²•</h2>
                <div class="code"># 1. ë ˆí¬ì§€í† ë¦¬ í´ë¡ <br>
git clone https://github.com/ldw188918-hue/Project.git<br>
cd Project<br><br>
# 2. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”<br>
python -m venv venv<br>
venv\Scripts\activate  # Windows<br><br>
# 3. ì˜ì¡´ì„± ì„¤ì¹˜<br>
pip install -r requirements.txt<br><br>
# 4. ëŒ€ì‹œë³´ë“œ ì‹¤í–‰<br>
streamlit run src/presentation/dashboard.py</div>

                <h3 style="margin-top: 40px; color: #2d3748;">ğŸ“š ê¸°ìˆ  ìŠ¤íƒ</h3>
                <div class="tech-stack">
                    <span class="tech-badge">Python 3.10+</span>
                    <span class="tech-badge">Streamlit</span>
                    <span class="tech-badge">Pandas</span>
                    <span class="tech-badge">Plotly</span>
                    <span class="tech-badge">Pytest</span>
                    <span class="tech-badge">GitHub Actions</span>
                </div>

                <p style="margin-top: 40px; font-size: 0.9em; color: #718096;">
                    Built with â¤ï¸ using SOLID principles and TDD methodology
                </p>
            </div>
        </body>
        </html>
        HTMLEOF

    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./build
